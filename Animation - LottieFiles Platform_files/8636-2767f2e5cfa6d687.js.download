"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8636],{79580:function(e,t,a){a.d(t,{s:function(){return d}});var n=a(97458),o=a(52983),i=a(86289),s=a(10836),l=a(91406),r=a(76682);const d=e=>{let{body:t,buttonTitle:a,cancelTitle:d="Cancel",closeCallback:c=(()=>null),confirmLoading:u=!1,isDestructive:f=!0,onConfirm:p,showModal:m,testId:h,title:v,zIndexClassName:b="z-50",version:y="v2"}=e;const C=(0,o.useCallback)((()=>{p()}),[p]),g=(0,o.useCallback)((e=>{c(e)}),[c]);return"v3"===y?(0,n.jsx)(r.H,{titleSeparator:!1,title:v,show:m,headerPadding:"pl-5 pr-4 pt-4 pb-0",titleCssClass:"text-lg font-bold text-primary",contentPadding:"p-5 pb-0",footerSeparator:!1,footer:(0,n.jsxs)("div",{className:"flex items-center justify-end gap-x-2",children:[(0,n.jsx)(s.z,{onClick:()=>g(l.CloseSource.CANCEL_BUTTON),size:"sm",variant:"ghost",children:d}),(0,n.jsx)(s.z,{onClick:C,disabled:u,loading:u,size:"sm",variant:f?"danger":"primary",children:a})]}),children:(0,n.jsx)("p",{className:"text-sm text-primary",children:t})}):(0,n.jsx)(l.ModalV2,{show:m,title:v,paddingSize:"md",zIndexClassName:b,closeCallback:g,testId:h,children:(0,n.jsxs)("div",{className:"mt-6 space-y-10",children:[(0,n.jsx)("p",{className:"text-sm text-gray-900",children:t}),(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,n.jsx)(i.z,{variant:"ghost",onClick:()=>g(l.CloseSource.CANCEL_BUTTON),fluid:!0,children:d}),(0,n.jsx)(i.z,{disabled:u,showLoader:u,color:f?"red":"teal",onClick:C,fluid:!0,children:a})]})]})})};t.Z=d},58636:function(e,t,a){a.r(t),a.d(t,{default:function(){return Je}});var n=a(97458),o=a(96734),i=a(88264),s=a(69826),l=a(84867),r=a(83849),d=a.n(r),c=a(79120),u=a(77179),f=a.n(u),p=a(40909),m=a(90077),h=a.n(m),v=a(45186),b=a.n(v),y=a(52983),C=a(75296),g=a(75800),E=a(80794),x=a(15118),w=a(13787),S=a(39391),I=a(54140),k=a(98532),A=a(91406),T=a(14938),N=a(50251),O=a(79580),j=a(42740),L=a(39281),M=a(20516),_=a(44818),R=a(14186),P=a(55928),D=a(92168),U=a(80349),F=a(57472),B=a(91196),V=a(96313),z=a(2336),G=a(10400),Y=a(25675),Z=a(17433),q=a(90801),W=a(44277),K=a(53749),H=a(93458),J=a(12112),Q=a(45922),X=a(1131),$=a(15880),ee=a(98271),te=a(7560),ae=a(91034),ne=a(63410),oe=a(56454);const ie=async(e,t)=>{try{const a=new ClipboardItem({[t]:Promise.resolve(e())});return await navigator.clipboard.write([a]),!0}catch(e){return!1}};var se=a(85642),le=a(31401),re=a(4585),de=a(26245),ce=a(43821);const ue=e=>{if(e.hasAttributeNS("http://www.w3.org/1999/xlink","href")){const t=e.getAttributeNS("http://www.w3.org/1999/xlink","href");t&&t.startsWith("data:image/png;")&&e.setAttributeNS("http://www.w3.org/1999/xlink","href",t.replace("data:image/png;","data:;"))}},fe=e=>{const t=e.childNodes;for(let a=0;a<t.length;a+=1){const n=t[a];n instanceof SVGElement&&"none"===n.style.display&&e.removeChild(n)}},pe=async e=>{let{animation:t,backgroundColor:n,container:o,dotLottie:i,dotLottieFormatVersion:s="1",format:l,frame:r,height:d,onSnapshot:c,themeId:u,width:f}=e;const p=(e=>{switch(e){case"text/plain":case"image/svg+xml":return"text/plain";case"image/png":return"image/png";default:throw new Error("Invalid content type")}})(l===ae.U.SVG?"image/svg+xml":"image/png");if("1"===s){if(!t)return;await(async e=>{let{animation:t,backgroundColor:n,container:o,contentType:i,format:s,frame:l,height:r,onSnapshot:d,width:c}=e;const u=(await a.e(7255).then(a.t.bind(a,53409,23))).default.loadAnimation({container:o,renderer:"svg",loop:!1,autoplay:!1,animationData:t});u.pause(),u.goToAndStop(l,!0);const f=o.firstChild.cloneNode(!0),p=Array.from(f.getElementsByTagName("image"));f.style.backgroundColor=n,f.setAttribute("width","".concat(c)),f.setAttribute("height","".concat(r)),fe(f),p.forEach(ue);const m=(new XMLSerializer).serializeToString(f);if(s===ae.U.SVG){const e=new Blob([m],{type:i});d({blob:e,contentType:i,format:s})}else{const e=new Worker(a.tu(new URL(a.p+a.u(2044),a.b)));e.onmessage=async t=>{if(t.data.type===ae.i.Error);else if(t.data.type===ae.i.Output){const e=t.data.buffer,a=new Blob([e],{type:i});d({blob:a,contentType:i,format:s})}e.terminate()},e.postMessage({type:ae.i.Input,svg:m,width:c,height:r,backgroundColor:n})}u.destroy()})({animation:t,backgroundColor:n,container:o,contentType:p,format:l,frame:r,height:d,onSnapshot:c,width:f})}if(l===ae.U.SVG)return;if(!i||!t)return;const m=new OffscreenCanvas(f,d),h=m.getContext("2d"),v=new ce.J({canvas:m,themeId:u,backgroundColor:n,autoplay:!1,data:t?JSON.stringify(t):await i.toArrayBuffer()});v.addEventListener("load",(async()=>{if(v.setFrame(r),!h){const e=await m.convertToBlob({type:p});return void await c({blob:e,contentType:p,format:l})}const e=await createImageBitmap(m);h.clearRect(0,0,m.width,m.height),n&&(h.rect(0,0,m.width,m.height),h.fillStyle=n||"transparent",h.fill()),h.drawImage(e,0,0,m.width,m.height);const t=await m.convertToBlob({type:p});await c({blob:t,contentType:p,format:l})}))};var me=a(95049),he=a(29602),ve=a(88317),be=a(6904),ye=a(13219),Ce=a(37210),ge=a(44440),Ee=a(86289);const xe=(0,Ce.F4)({"0%":{opacity:0,transform:"scale(0)"},"100%":{opacity:1,transform:"scale(1)"}}),we=(0,Ce.zo)(ye.VY,{transformOrigin:"var(--radix-popover-content-transform-origin)",animation:"".concat(xe," 0.2s ease-in"),zIndex:9}),Se=e=>{let{align:t,alignOffset:a,children:o,handleCtaClick:i,side:l,sideOffset:r=8}=e;const{done:d,nextStep:c,state:u}=(0,ve.N)(),f=u.tasks[be.O.ACCESSIBILITY_ANALYZER].show;(0,y.useEffect)((()=>{f&&(0,s.Z9)(new s.Z_({onboardingTaskId:be.O.ACCESSIBILITY_ANALYZER,action:"view",label:"accessibility analyzer link popover",from:"accessibility analyzer link popover",step:"1"}))}),[f]);const p=(0,y.useCallback)((()=>{(0,s.Z9)(new s.Z_({onboardingTaskId:be.O.ACCESSIBILITY_ANALYZER,action:"click",label:"dismiss CTA",from:"accessibility analyzer link popover",step:"1"})),d({taskId:be.O.ACCESSIBILITY_ANALYZER})}),[d]),m=(0,y.useCallback)((()=>{(0,s.Z9)(new s.Z_({onboardingTaskId:be.O.ACCESSIBILITY_ANALYZER,action:"click",label:"try it out CTA",from:"accessibility analyzer link popover",step:"1"})),c({taskId:be.O.ACCESSIBILITY_ANALYZER}),null==i||i(Q.s.ACCESSIBILITY_ANALYZER)}),[i,c]),h=(0,y.useCallback)((e=>{e.preventDefault()}),[]);return(0,n.jsxs)(ye.fC,{open:f,children:[(0,n.jsx)(ye.ee,{children:o}),(0,n.jsx)(ye.h_,{children:(0,n.jsxs)(we,{onOpenAutoFocus:h,onCloseAutoFocus:h,onFocusOutside:h,sideOffset:r,tabIndex:0,align:t,alignOffset:a,side:l,className:"relative rounded-lg flex-col w-[280px] h-full text-white bg-gray-900 z-10 border-0 select-none px-4 pb-3 pt-4 shadow-2xl",children:[(0,n.jsx)(ye.Eh,{width:16,height:8,className:"visible text-gray-900 fill-current stroke-current"}),(0,n.jsxs)(ge.k,{direction:"column",children:[(0,n.jsxs)(ge.k,{justify:"between",align:"center",children:[(0,n.jsx)("h1",{className:"text-base font-bold text-white",children:"Accessibility Analyzer"}),(0,n.jsx)(k.h,{icon:"cross",sizeClass:"h-6 w-6",onClick:p,className:"text-white stroke-current",hoverBackgroundClass:"hover:bg-transparent"})]}),(0,n.jsx)("div",{className:"mt-4 mb-2 rounded-lg overflow-hidden bg-[#FF7BF9]",children:(0,n.jsx)("img",{src:"/images/accessibility-analyzer-popover/placeholder.png",alt:"Accessibility analyzer",className:"w-full h-auto"})}),(0,n.jsx)("p",{className:"text-sm text-gray-200 mb-7",children:"Lottie Accessibility Analyzer reviews key factors like color contrast, sensitivity motion, and more to identify issues, enhance experiences and meet accessibility standards."}),(0,n.jsx)(ge.k,{columnGap:8,justify:"end",children:(0,n.jsx)(Ee.z,{fontClasses:"font-bold",onClick:m,children:"Try it out"})})]})]})})]})},Ie=e=>{let{canUseAccessibilityAnalyzer:t,currentPushoverTab:a,onAccessibilityAnalyzerMenuClick:o,onTabChange:i}=e;return t?(0,n.jsx)("div",{"data-onboarding-id":"accessibility-analyzer",children:(0,n.jsx)(Se,{handleCtaClick:i,side:"left",align:"start",alignOffset:-16,sideOffset:9,children:(0,n.jsx)(N.n,{icon:"accessibility",title:"Accessibility Analyzer",onClick:o,iconColorClass:a===Q.s.ACCESSIBILITY_ANALYZER?"text-actionPrimary":"text-gray-600"})})}):null};var ke=a(8779),Ae=a(49602),Te=a(21959);const Ne=e=>{let{children:t,onStateMachineToggle:a}=e;return(0,n.jsx)(Te.J,{onStateMachineToggle:a,children:(0,n.jsx)(Ae.s,{children:t})})};var Oe=a(94749),je=a(15085);const Le=h()((async()=>a.e(9133).then(a.bind(a,19133))),{loadableGenerated:{webpack:()=>[19133]},ssr:!1}),Me=h()((async()=>a.e(8751).then(a.bind(a,98751))),{loadableGenerated:{webpack:()=>[98751]},ssr:!1}),_e=h()((async()=>a.e(1711).then(a.bind(a,1711))),{loadableGenerated:{webpack:()=>[1711]},ssr:!1}),Re=h()((async()=>Promise.all([a.e(9731),a.e(4651),a.e(8447)]).then(a.bind(a,68983))),{loadableGenerated:{webpack:()=>[68983]},ssr:!1}),Pe=h()((async()=>a.e(591).then(a.bind(a,50591))),{loadableGenerated:{webpack:()=>[50591]},ssr:!1}),De=h()((async()=>(await a.e(7069).then(a.bind(a,57069))).AnimationAccessibilityAnalyzerPanel),{loadableGenerated:{webpack:()=>[57069]},ssr:!1}),Ue=h()((async()=>Promise.all([a.e(2900),a.e(3163)]).then(a.bind(a,33163))),{loadableGenerated:{webpack:()=>[33163]},ssr:!1}),Fe=h()((async()=>a.e(923).then(a.bind(a,70923))),{loadableGenerated:{webpack:()=>[70923]},ssr:!1}),Be=h()((async()=>a.e(4543).then(a.bind(a,24543))),{loadableGenerated:{webpack:()=>[24543]},ssr:!1}),Ve=h()((async()=>a.e(901).then(a.bind(a,901))),{loadableGenerated:{webpack:()=>[901]},ssr:!1}),ze=h()((async()=>Promise.all([a.e(7713),a.e(4622),a.e(6621)]).then(a.bind(a,46621))),{loadableGenerated:{webpack:()=>[46621]},ssr:!1}),Ge=h()((async()=>Promise.all([a.e(243),a.e(2410),a.e(2614),a.e(4270),a.e(4235),a.e(3073),a.e(9455),a.e(6902),a.e(3037)]).then(a.bind(a,3037))),{loadableGenerated:{webpack:()=>[3037]},ssr:!1}),Ye=h()((async()=>Promise.resolve().then(a.bind(a,36509))),{loadableGenerated:{webpack:()=>[36509]},ssr:!1}),Ze=h()((async()=>a.e(2282).then(a.bind(a,32282))),{loadableGenerated:{webpack:()=>[32282]},ssr:!1}),qe=h()((async()=>Promise.all([a.e(5568),a.e(3889),a.e(5994)]).then(a.bind(a,5994))),{loadableGenerated:{webpack:()=>[5994]},ssr:!1}),We=h()((async()=>Promise.all([a.e(8607),a.e(4233)]).then(a.bind(a,64233))),{loadableGenerated:{webpack:()=>[64233]},ssr:!1}),Ke=h()((async()=>Promise.all([a.e(9731),a.e(2900),a.e(5280),a.e(7761),a.e(8121),a.e(7225),a.e(8343)]).then(a.bind(a,92471))),{loadableGenerated:{webpack:()=>[92471]},ssr:!1}),He=()=>{var e,t,a,r,u,m,h,v,x,de,ce,ue,fe,be,ye,Ce,ge,Ee,xe,we,Se,Ae,Te;const{isConsideredNewUser:He,start:Je,state:Qe,stop:Xe}=(0,ve.N)(),[$e,et]=(0,y.useState)(),[tt,at]=(0,g.useRecoilState)(W.sI),[nt,ot]=(0,y.useState)(),[it,st]=(0,y.useState)(),lt=(0,g.useSetRecoilState)(H.E4),rt=(0,g.useSetRecoilState)(W.GG),[dt,ct]=(0,y.useState)(null),[ut,ft]=(0,y.useState)(null),[pt,mt]=(0,y.useState)(!1),ht=(0,g.useResetRecoilState)(W.h3),vt=(0,g.useResetRecoilState)(W.lS),bt=(0,g.useSetRecoilState)(J.QJ),[yt,Ct]=(0,y.useState)(!1),gt=(0,y.useRef)(!1),Et=(0,y.useRef)(!1),xt=(0,g.useSetRecoilState)(H.qx),[wt,St]=(0,y.useState)(),[It,kt]=(0,y.useState)(!1),[At,Tt]=(0,y.useState)(!1),[Nt,Ot]=(0,y.useState)(""),[jt,Lt]=(0,y.useState)(Q.s.NONE),[Mt,_t]=(0,y.useState)(!1),Rt=(0,y.useRef)(null),Pt=/^((?!chrome|android).)*safari/iu.test(navigator.userAgent),[Dt,Ut]=(0,y.useState)(!1),[Ft,Bt]=(0,y.useState)(),[Vt,zt]=(0,y.useState)(null),[Gt,Yt]=(0,y.useState)(null),[Zt,qt]=(0,y.useState)(null),[Wt,Kt]=(0,y.useState)(null),[Ht,Jt]=(0,y.useState)(""),[Qt,Xt]=(0,y.useState)(!1),[$t,ea]=(0,y.useState)(!1),ta=(0,y.useRef)(!1),aa=(0,j.p)(),na=(0,p.useRouter)(),{frame:oa,sort:ia}=na.query,{done:sa,isLoaded:la,setWelcomeText:ra,showChecklist:da,showFirstPendingTask:ca,state:ua}=(0,V.d)(),{handback_id:fa,id:pa}=na.query,ma=(0,_.a)(),{activeWorkspaceId:ha,setActiveWorkspace:va,workspaces:ba}=(0,G.cF)(),ya=(0,o.SS)(l.AD.ENABLE_MERGE_DOWNLOAD_HANDOFF_PANEL).on,Ca=(0,o.SS)(l.AD.ENABLE_ACCESSIBILITY_ANALYZER).on,ga=(0,o.SS)(l.AD.ENABLE_STATE_MACHINES).on,Ea=(null==tt?void 0:tt.fileObject.attributes.formatVersion)||"1",[xa]=(0,E.aM)({query:Y.wP,variables:{id:pa},pause:!pa,requestPolicy:"network-only"}),[wa]=(0,E.aM)({query:Oe._V,variables:{fileId:pa},pause:!pa}),Sa=(0,y.useMemo)((()=>{if(wa.data){var e;var t;return null!==(t=null===(e=wa.data.fileVersions.edges[0])||void 0===e?void 0:e.node)&&void 0!==t?t:null}return null}),[wa]),Ia=(0,y.useMemo)((()=>!pa||!xa.data),[pa,xa.data]),[ka]=(0,E.aM)({query:Y.xQ,variables:{id:pa,sort:ia,folderId:null===(t=xa.data)||void 0===t||null===(e=t.file.folder)||void 0===e?void 0:e.id},pause:Ia}),[Aa]=(0,E.aM)({query:oe.gR,variables:{resourceId:null==tt?void 0:tt.id,resourceType:ne.f.FILE},pause:!(null==tt?void 0:tt.id)}),Ta=(0,y.useMemo)((()=>{var e;const t="https://app.lottiefiles.com",a=null===(e=Aa.data)||void 0===e?void 0:e.publicShare,n="".concat(t,"/animation/").concat(null==tt?void 0:tt.id);return a?"".concat(t,"/share/").concat(null==a?void 0:a.shareCode):n}),[null==tt?void 0:tt.id,null===(a=Aa.data)||void 0===a?void 0:a.publicShare]),[Na,Oa]=(0,D.w)(),[ja,La]=(0,B._)("animation_sidebar_panel_state",{}),Ma=(0,y.useCallback)((e=>{e?(ct(f()(e)),qt(f()(e))):(ct(null),qt(null))}),[]),_a=e=>{var t,a;Xt(!0);const o="next"===e?null===(t=ka.data)||void 0===t?void 0:t.fileAboveAndBelowId.nextAnimation:null===(a=ka.data)||void 0===a?void 0:a.fileAboveAndBelowId.prevAnimation;if(o){const t={...na.query};t.id=o,na.push({pathname:"/animation/[id]",query:t},void 0,{shallow:!0}),"next"===e?Et.current=!1:gt.current=!1}else{const t="next"===e?gt:Et;if(!t.current){const e=(0,n.jsx)("div",{children:"No more animations to go to"});null==aa||aa.pushCustom(e,1e3,"!bg-gray-900","text-white"),t.current=!0}}};(0,F.Z)({key:"k",action:()=>_a("next"),dependencies:[ka,Na,na],takesPrecedence:!0}),(0,F.Z)({key:"j",action:()=>_a("prev"),dependencies:[ka,Na,na],takesPrecedence:!0}),(0,y.useEffect)((()=>{if(ka.data&&ka.data.fileAboveAndBelowId.nextAnimation&&!ta.current){var e;const t="next-prev-toast-".concat(null===(e=ma.user)||void 0===e?void 0:e.id),a=localStorage.getItem(t),o=(new Date).getTime();if(!a||o-parseInt(a,10)>12096e5){localStorage.setItem(t,o.toString());const e=(0,n.jsxs)("div",{children:["Use the ",(0,n.jsx)("span",{className:"px-2 py-0.5 mx-1 bg-gray-500 rounded",children:"J"})," and"," ",(0,n.jsx)("span",{className:"px-2 py-0.5 mx-1 bg-gray-500 rounded",children:"K"})," keys to go to the next or previous animation"]});null==aa||aa.pushCustom(e,3e3,"!bg-gray-900","text-white")}ta.current=!0}}),[aa,null===(r=ma.user)||void 0===r?void 0:r.id,ka.data]),(0,y.useEffect)((()=>{if(xa.data){var e,t;const o=null===(e=xa.data.file.folder)||void 0===e?void 0:e.id,i=null===(t=xa.data.file.folder)||void 0===t?void 0:t.name,s=xa.data.file.project.id,l=xa.data.file.project.title;var a;const r=null!==(a=xa.data.file.project.isPrivate)&&void 0!==a&&a;var n;const d=null!==(n=xa.data.file.project.isSystem)&&void 0!==n&&n,c=xa.data.file.project.workspaceId,u=ba.some((e=>{let{id:t}=e;var a;return t===(null===(a=xa.data)||void 0===a?void 0:a.file.project.workspaceId)}));c&&u&&c!==ha&&va(c,!1),bt({type:o?"folder":"project",name:o?i:l,folderId:o,folderName:i,projectId:s,projectTitle:l,isPrivate:r,isSystem:d,workspaceId:c})}}),[xa.data,bt,ha,va,ba]);const[Ra,Pa]=(0,y.useState)(""),[Da]=(0,g.useRecoilState)(W.h3),{canDownload:Ua,canFullAccess:Fa,canView:Ba}=(0,M.a)({scopes:(null==tt?void 0:tt.animationPermissionScopes)||[]}),[Va,za]=(0,y.useState)({id:"",showDescOnCollection:!1,description:"",descriptionModifiedBy:null});(0,y.useEffect)((()=>{var e;if((ht(),xa.fetching&&xt(!0),!xa.fetching)&&(xt(!1),pa&&Na===Q.s.NONE&&window.innerWidth>768))if(ja&&(null===(e=ma.user)||void 0===e?void 0:e.id)&&ja[ma.user.id]){var t,a,n;const e=ja[ma.user.id];e===Q.s.LOTTIE_MOCKUP?Oa(Q.s.SEGMENT_MOCKUP):ga&&(null===(n=xa.data)||void 0===n||null===(a=n.file.fileObject)||void 0===a||null===(t=a.stateMachines)||void 0===t?void 0:t.length)?Oa(Q.s.STATE_MACHINES):Oa(e)}else if(!Qt){var o,i,s;if(ga)(null===(s=xa.data)||void 0===s||null===(i=s.file.fileObject)||void 0===i||null===(o=i.stateMachines)||void 0===o?void 0:o.length)?Oa(Q.s.STATE_MACHINES):Oa(Q.s.NONE);else Oa(Q.s.DOWNLOAD)}return()=>{}}),[xa,pa]);const Ga=(0,y.useCallback)((e=>{try{void 0!==(0,c.H3)(e)&&Pa(e)}catch(e){Pa("")}}),[]);(0,y.useEffect)((()=>{var e,t;if(null==Da?void 0:Da.fileObject){var a;et(Da.fileObject.url),ot(Da.fileObject.metadata),st(Da.fileObject.attributes),ft(Da.fileObject),St(Da.tags),Kt(null!==(a=Da.fileObject.themes)&&void 0!==a?a:null),Ga(Da.backgroundColor);const e=Da.fileObject.url,t=e.substring(e.lastIndexOf("/")+1,e.indexOf("?")).split(".").pop();rt("lottie"===t)}else if((null===(e=xa.data)||void 0===e?void 0:e.file)&&xa.data.file.fileObject&&!xa.fetching){var n,o;et(xa.data.file.fileObject.url),at(xa.data.file),lt({type:"project",id:xa.data.file.project.id}),ot(xa.data.file.fileObject.metadata),st(xa.data.file.fileObject.attributes),ft(xa.data.file.fileObject),St(xa.data.file.currentVersion.tags),Kt(null!==(o=xa.data.file.fileObject.themes)&&void 0!==o?o:null),za({id:xa.data.file.id,showDescOnCollection:xa.data.file.showDescOnCollection,description:xa.data.file.description,descriptionUpdatedAt:null===(n=xa.data.file)||void 0===n?void 0:n.descriptionUpdatedAt,descriptionModifiedBy:xa.data.file.descriptionModifiedBy}),Ga(xa.data.file.backgroundColor);const e=xa.data.file.fileObject.url,t=e.substring(e.lastIndexOf("/")+1,e.indexOf("?")).split(".").pop();rt("lottie"===t)}else xa.error&&(0,ee.w)(xa.error);if(null===(t=xa.data)||void 0===t?void 0:t.file.upgradeRequired)throw new L.K}),[xa,Da,rt,at,lt,Ga]),(0,y.useEffect)((()=>{var e;(null===(e=xa.data)||void 0===e?void 0:e.file.id)&&(0,s.Z9)(new s.Aj({fileId:xa.data.file.id,projectId:xa.data.file.project.id,workspaceId:xa.data.file.project.workspaceId,url:window.location.href}))}),[null===(u=xa.data)||void 0===u?void 0:u.file.id,null===(m=xa.data)||void 0===m?void 0:m.file.project.id,null===(h=xa.data)||void 0===h?void 0:h.file.project.workspaceId]);const[Ya,Za]=(0,y.useState)(!1),[qa,Wa]=(0,y.useState)(!1),Ka=(0,C.r)(),[,Ha]=(0,g.useRecoilState)(K.YC),Ja=(0,y.useCallback)((()=>{na.query.comment&&(delete na.query.comment,na.push({pathname:na.pathname,query:na.query},void 0,{shallow:!0}))}),[na]),Qa=(0,y.useCallback)((()=>{if(Na===Q.s.ACCESSIBILITY_ANALYZER&&Qe.tasks[l.Oc.ACCESSIBILITY_ANALYZER].show&&Xe({taskId:l.Oc.ACCESSIBILITY_ANALYZER}),Na===Q.s.STATE_MACHINES&&(0,s.Z9)(new s.E5({action:"panel-close",target:"state machine panel close button",description:"click to dismiss state machine panel"})),Na===Q.s.SEGMENT_MOCKUP&&It)return Tt(!0),void Lt(Q.s.NONE);Oa(Q.s.NONE),La((e=>{var t;if(null===(t=ma.user)||void 0===t?void 0:t.id){const t={...e};return delete t[ma.user.id],t}return e})),na.query.panel&&(delete na.query.panel,na.push({pathname:na.pathname,query:na.query},void 0,{shallow:!0}))}),[Na,null===(v=ma.user)||void 0===v?void 0:v.id,It,na,Oa,La,Xe,Qe.tasks]),Xa=(0,y.useCallback)((e=>()=>{if(Na===e)Qa();else{if(Na===Q.s.SEGMENT_MOCKUP&&It)return Tt(!0),void Lt(e);Oa(e),La((t=>{var a;return(null===(a=ma.user)||void 0===a?void 0:a.id)?{...t,[ma.user.id]:e}:t})),na.query.panel!==e&&(na.query.panel=e,na.push({pathname:na.pathname,query:na.query},void 0,{shallow:!0}))}}),[Qa,Na,null===(x=ma.user)||void 0===x?void 0:x.id,It,na,Oa,La]);(0,y.useEffect)((()=>{Ha(""),Ct(!1),Ma(null),Ja()}),[Na,Ha,Ct,Ja,Ma]),(0,F.Z)({key:"c",action:()=>{Na!==Q.s.COMMENTS?Xa(Q.s.COMMENTS)():Na===Q.s.COMMENTS&&Qa()},dependencies:[Xa,Qa,Na]});const[$a]=(0,E.aM)({query:Z.g,variables:{id:fa},pause:!fa});(0,y.useEffect)((()=>{xa.data&&tt&&(Na!==Q.s.COMMENTS&&na.query.comment&&(Xa(Q.s.COMMENTS)(),na.push({pathname:na.pathname,query:na.query},void 0,{shallow:!0})),Ua()||Na!==Q.s.DOWNLOAD||Xa(Q.s.COMMENTS)(),Ua()||Na!==Q.s.EMBED||Xa(Q.s.COMMENTS)(),Ca||Na!==Q.s.ACCESSIBILITY_ANALYZER||Xa(Q.s.FILE_INFO)(),na.query.edit_description&&(Na!==Q.s.FILE_INFO&&Xa(Q.s.FILE_INFO)(),Ct(!0),delete na.query.edit_description,na.replace({pathname:na.pathname,query:na.query},void 0,{shallow:!0})))}),[tt,Na,na,Xa,yt,Ua,xa.data,Ca]);const en=(0,y.useCallback)((()=>{if(It&&!Ya)return Tt(!0),void _t(!0);Ya?(Za(!1),Ka.exit()):(Za(!0),Qa(),Ka.enter())}),[Qa,Ya,Ka,It]),tn=(0,y.useCallback)(((e,t)=>{t===Ka&&Za(!!e)}),[Ka]);(0,y.useEffect)((()=>{var e;tt&&("color-palette"!==na.query.from||(null===(e=ua.tasks[$.X.CUSTOMIZE_COLOR])||void 0===e?void 0:e.done)||(sa($.X.CUSTOMIZE_COLOR),console.log("Show checklist 1!"),da(!0)),"download"===na.query.from||"embed"===na.query.from||!la||ua.seen||ua.show||(ra(ua.newToOnboarding?"Welcome! Learn all about our platform's most helpful features with this checklist ✨":"Level up your motion design game by exploring our platform's most helpful features in this checklist ✨"),console.log("Show checklist 2!",la,ua.seen,ua.show),da(!0),ca()))}),[tt,ua,sa]);const an=(0,y.useCallback)((()=>{Wa(!qa)}),[qa,Wa]),nn=(0,y.useRef)(null),on=(0,je.T)((null==tt||null===(de=tt.project)||void 0===de?void 0:de.workspaceId)||null,(null==Sa?void 0:Sa.renderer)||"svg"),sn=(0,y.useMemo)((()=>(null==Da?void 0:Da.id)||(null==tt?void 0:tt.currentVersionId)||""),[null==Da?void 0:Da.id,null==tt?void 0:tt.currentVersionId]),ln=(0,y.useMemo)((()=>{var e,t;return{entityId:sn,entityGroupId:(null==tt?void 0:tt.id)||pa,isEnabled:!(null==Da?void 0:Da.id)||Da.id===(null==tt?void 0:tt.currentVersionId),workspaceId:(null==tt||null===(t=tt.project)||void 0===t||null===(e=t.workspace)||void 0===e?void 0:e.id)||""}}),[sn,null==Da?void 0:Da.id,null==tt?void 0:tt.currentVersionId,null==tt?void 0:tt.id,null==tt||null===(ue=tt.project)||void 0===ue||null===(ce=ue.workspace)||void 0===ce?void 0:ce.id,pa]),rn=(0,R.X0)(ln),dn=(0,R.us)(ln),cn=(0,R.es)(ln),un=(0,R.VP)(ln),fn=(0,R.UR)(ln),pn=(0,R.OL)(ln),mn=(0,R._i)(ln),{canFetchMoreComments:hn,commentsQuery:vn,onFetchMoreComments:bn,onHideReplies:yn,onShowReplies:Cn,parentComment:gn,pushoverMode:En}=(0,P.M)({entityId:Na===Q.s.COMMENTS?sn:"",entityType:X.TY.FileVersion});(0,y.useEffect)((()=>{oa&&yn(null)}),[oa,yn]);const xn=(0,U.p)({color:Ra||"#f8fafc"}),[wn]=(0,E.aM)({query:q.mT,variables:{id:pa},pause:!pa||Na!==Q.s.COMMENTS}),[Sn,In]=(0,y.useState)(!1),kn=(0,y.useCallback)((()=>In(!0)),[]),An=(0,y.useCallback)((()=>In(!1)),[]),Tn=(0,y.useCallback)((()=>{const e=new s.Rd("button","discard changes","unsaved segment changes modal");return Mt?(kt(!1),_t(!1),Za(!0),Oa(Q.s.NONE),void Ka.enter()):((0,s.Z9)(e),Nt?(kt(!1),void na.push(Nt)):(kt(!1),Oa(jt),void Lt(Q.s.NONE)))}),[Ka,na,Oa,Mt,jt,Nt]);(0,y.useEffect)((()=>{An()}),[En,An]),(0,y.useEffect)((()=>{const e=e=>{if(It&&!At)throw na.events.emit("routeChangeError"),Tt(!0),Ot(e),"Abort route change. Please ignore this error.";At&&Tt(!1)};return na.events.on("routeChangeStart",e),()=>{na.events.off("routeChangeStart",e)}}),[It,na.events,At]);const Nn=(0,y.useCallback)((async e=>{await navigator.clipboard.writeText(Ta),(0,s.Z9)(new s.wk({source:e,subject:"animation",variant:Ta.includes("share")?"public-share":"direct"})),null==aa||aa.pushCustom("Animation link copied",2500,"!bg-gray-900","text-white")}),[Ta,aa]),On=(0,y.useCallback)((()=>{Ut(!1),zt(null),Yt(null),Bt(void 0)}),[]),jn=(0,y.useCallback)((async()=>{if(!Vt||!Gt||!Ft)return;if(await ie((async()=>Vt),Gt)){const e=Ft===ae.U.SVG?"SVG frame copied":"PNG frame copied";null==aa||aa.pushCustom(e,2500,"!bg-gray-900","text-white")}On()}),[Vt,Gt,Ft,On,aa]),Ln=(0,y.useCallback)((async e=>{if(Pt)return Yt(e.contentType),Bt(e.format),zt(e.blob),void Ut(!0);if(await ie((async()=>e.blob),e.contentType)){const t=e.format===ae.U.SVG?"SVG frame copied":"PNG frame copied";null==aa||aa.pushCustom(t,2500,"!bg-gray-900","text-white")}}),[Pt,aa]),Mn=(0,y.useCallback)((async e=>{let t,{format:a,frame:n,height:o,width:i}=e;if(!$e)return;const s=await me.J2.fromURL($e,"preserve");if(Ht);else if(Zt)t=Zt;else{const e=await(0,te.tr)($e);if(!e)return void(null==aa||aa.pushError("Failed "));t=e}pe({animation:t,dotLottie:s,dotLottieFormatVersion:Ea,themeId:Ht||"",backgroundColor:qa?"transparent":Ra,container:Rt.current,format:a,frame:n,height:o,width:i,onSnapshot:Ln})}),[Ra,Zt,Ln,Ht,aa,qa,Ea,$e]);(0,F.Z)({key:"l",takesPrecedence:!0,metaKeyRequired:!0,action:()=>{Nn("keypress")},dependencies:[Nn]});const _n=(0,y.useCallback)((e=>{if(Na!==e){if(Na===Q.s.SEGMENT_MOCKUP&&It)return Tt(!0),void Lt(e);(0,s.Z9)(new s.lF({location:e})),Xa(e)()}}),[Na,It,Xa]),Rn=(0,y.useCallback)((e=>{e===Q.s.ACCESSIBILITY_ANALYZER&&Qe.tasks[l.Oc.ACCESSIBILITY_ANALYZER].show&&Xe({taskId:l.Oc.ACCESSIBILITY_ANALYZER})}),[Qe.tasks,Xe]),Pn=(0,y.useCallback)((e=>()=>{Rn(e),_n(e)}),[Rn,_n]),Dn=(0,y.useCallback)((e=>{const t=e===A.CloseSource.GENERIC?"cross":"stay on page",a=new s.Rd("button",t,"unsaved segment changes modal");e===A.CloseSource.GENERIC&&(0,s.Z9)(a),e===A.CloseSource.CANCEL_BUTTON&&(0,s.Z9)(a),Tt(!1)}),[]),Un=ma.isAuthenticated&&(null===(fe=ma.user)||void 0===fe?void 0:fe.id)?"".concat(ma.user.id):"guest",[,Fn]=(0,B._)("wf:animation-page-visit-count:".concat(Un),0);(0,y.useEffect)((()=>{Fn((e=>e<Number.MAX_SAFE_INTEGER?e+1:e))}),[na.pathname,Fn]);const Bn=(0,y.useCallback)((()=>{Pn(Q.s.ACCESSIBILITY_ANALYZER)()}),[Pn]),{isLoading:Vn,optimizedVariants:zn,originalSize:Gn}=((e,t,a)=>{var n,o,i;const[s,l]=(0,y.useState)(),r=(0,y.useMemo)((()=>({fileId:t,fileVersionId:a})),[t,a]),[d,c]=(0,E.aM)({query:Y.ZR,variables:r,requestPolicy:"network-only",pause:!t||!a}),[u,f]=(0,E.Db)(Y.VA),[p,m]=(0,E.Db)(Y.l$);(0,y.useEffect)((()=>{t&&a&&c({requestPolicy:"network-only"})}),[t,a,c]),(0,y.useEffect)((()=>{(async()=>{var e,n;t&&a&&!(null===(n=d.data)||void 0===n||null===(e=n.fileVariants)||void 0===e?void 0:e.length)&&(await f({fileId:t,fileVersionId:a}),await m({fileId:t,fileVersionId:a}),c({requestPolicy:"network-only"}))})()}),[t,a,null===(o=d.data)||void 0===o||null===(n=o.fileVariants)||void 0===n?void 0:n.length]);const h=(0,y.useMemo)((()=>{var e,t,a;const n=null!==(a=null===(t=d.data)||void 0===t||null===(e=t.fileVariants)||void 0===e?void 0:e.filter((e=>e.isOptimized)))&&void 0!==a?a:[],o=new Map;return n.forEach((e=>{o.has(e.fileSize)||o.set(e.fileSize,e)})),Array.from(o.values()).sort(((e,t)=>"application/zip"===e.contentType?-1:"application/zip"===t.contentType?1:0))}),[null===(i=d.data)||void 0===i?void 0:i.fileVariants]);var v;return(0,y.useEffect)((()=>{let t=!0;return(async()=>{if(e)try{const a=await(0,te.yo)(e);t&&l(a)}catch(e){console.error("Failed to extract animation buffer:",e)}})(),()=>{t=!1}}),[e]),{isLoading:d.fetching||!s||u.fetching||p.fetching,optimizedVariants:h,originalSize:null!==(v=null==s?void 0:s.byteLength)&&void 0!==v?v:0}})($e,null==tt?void 0:tt.id,null==tt?void 0:tt.currentVersionId);(0,y.useEffect)((()=>{!tt||Na===Q.s.ACCESSIBILITY_ANALYZER||He||Qe.tasks[l.Oc.ENABLE_ASSET_LINK].show&&Na===Q.s.EMBED||Je({taskId:l.Oc.ACCESSIBILITY_ANALYZER})}),[tt,He,Qe,Je,Na]);const Yn=(0,y.useCallback)((e=>{ea(e)}),[]);return(0,n.jsxs)(Ne,{onStateMachineToggle:Yn,children:[(0,n.jsx)(b(),{children:(0,n.jsx)("title",{children:"Animation - LottieFiles Platform"})}),(0,n.jsxs)(w.o,{headerControl:(0,n.jsx)(z.s,{features:null==tt?void 0:tt.features,children:(0,n.jsx)(Ke,{animation:tt,animationFetching:xa.fetching})}),contentWrapperCssClasses:"flex overflow-hidden flex-grow",children:[tt&&(0,n.jsxs)(z.s,{features:tt.features,children:[(0,n.jsxs)(C.I,{className:d()({"flex flex-grow":!0}),handle:Ka,onChange:tn,children:[(0,n.jsx)("div",{className:d()({"flex relative flex-grow":!0,"transparency-grid":qa}),children:(0,n.jsxs)("div",{className:"relative flex w-full h-full",children:[(0,n.jsx)("div",{className:d()({"flex absolute inset-0 flex-grow":!0,"transparency-grid":qa}),style:{...Ra?{background:Ra}:{}}}),Na===Q.s.LOTTIE_MOCKUP?(0,n.jsx)("div",{className:"relative flex items-center justify-center w-full h-full overflow-auto pr-80",children:(0,n.jsx)(qe,{animation:tt,canEdit:Fa()})}):(0,n.jsxs)("div",{className:d()("relative flex items-center justify-center h-full overflow-auto transition-width",{"w-[calc(100vw-344px)]":Na!==Q.s.NONE,"w-full":Na===Q.s.NONE}),children:[$e&&!dt&&(0,n.jsx)(We,{showComments:!0,canComment:!Da,canCreateThemes:Ua(),canCreateStateMxns:Fa(),mentionables:null===(be=wn.data)||void 0===be?void 0:be.commentMentionableUsers,portalRoot:nn.current,animationUrl:$e,currentDiscussion:gn,currentUserId:null===(ye=ma.user)||void 0===ye?void 0:ye.id,entityId:sn,entityType:X.TY.FileVersion,fileId:tt.id,controls:!Ya,isLight:xn,onCopyFrameClick:Mn,onCopyLinkClick:Nn,onDeleteComment:rn,onEditComment:dn,onPostComment:cn,onReplyToComment:un,onResolveComment:fn,onSelectReaction:pn,onUnresolveComment:mn,withContextMenu:!0,themes:null==Wt?void 0:Wt.map((e=>e.id)),themeId:Ht,onThemeChange:Jt,formatVersion:Ea,animationHeight:null==nt?void 0:nt.height,animationWidth:null==nt?void 0:nt.width,renderer:on}),$e&&Zt&&(0,n.jsx)(We,{portalRoot:nn.current,animationUrl:Zt,controls:!Ya,isLight:xn,onCopyFrameClick:Mn,onCopyLinkClick:Nn,withContextMenu:!0,fileId:tt.id,themes:null==Wt?void 0:Wt.map((e=>e.id)),themeId:Ht,onThemeChange:Jt,animationWidth:null==nt?void 0:nt.width,animationHeight:null==nt?void 0:nt.height,formatVersion:Ea}),!Ya&&(0,n.jsxs)("div",{className:d()("absolute p-0 bottom-8 top-8 right-0 -translate-x-full flex flex-col min-h-0"),children:[!$t&&(0,n.jsxs)("div",{className:"flex flex-col gap-2","data-onboarding-id":"anim-panel-btn",children:[Ba()&&(0,n.jsx)("div",{"data-onboarding-id":"anim-comment-btn",children:(0,n.jsx)(N.n,{icon:"comment",title:"Comments",shortcut:(0,n.jsx)(T.z,{keys:["C"]}),onClick:Pn(Q.s.COMMENTS),iconColorClass:Na===Q.s.COMMENTS?"text-actionPrimary":"text-gray-600",testId:"animation-comments-button"})}),(0,n.jsx)(N.n,{icon:"info",title:"Animation information",onClick:Pn(Q.s.FILE_INFO),iconColorClass:Na===Q.s.FILE_INFO?"text-actionPrimary":"text-gray-600",testId:"animation-info-button"}),(0,n.jsx)(Ie,{onTabChange:_n,currentPushoverTab:Na||Q.s.NONE,onAccessibilityAnalyzerMenuClick:Bn,canUseAccessibilityAnalyzer:Ca}),Fa()&&!Da&&(0,n.jsx)("div",{"data-onboarding-id":"anim-color-palette-btn",children:(0,n.jsx)(N.n,{icon:"color-palette",title:"Color Palette",onClick:Pn(Q.s.COLOR_PALETTES),iconColorClass:Na===Q.s.COLOR_PALETTES?"text-actionPrimary":"text-gray-600",testId:"animation-color-palette-button"})}),!Da&&(0,n.jsx)("div",{"data-onboarding-id":"anim-segment-btn",children:(0,n.jsx)(N.n,{icon:"segment-mockup",title:"Segments & mockups",onClick:Pn(Q.s.SEGMENT_MOCKUP),iconColorClass:Na===Q.s.SEGMENT_MOCKUP?"text-actionPrimary":"text-gray-600",testId:"animation-segment-button"})}),Fa()&&(0,n.jsx)("div",{"data-onboarding-id":"anim-version-btn",children:(0,n.jsx)(N.n,{icon:"history",title:"Version history",onClick:Pn(Q.s.VERSIONS),iconColorClass:Na===Q.s.VERSIONS?"text-actionPrimary":"text-gray-600",testId:"animation-version-button"})}),Ua()&&!Da&&(0,n.jsx)(N.n,{icon:"embed",title:"Handoff",iconColorClass:Na===Q.s.EMBED?"text-actionPrimary":"text-gray-600",testId:"animation-handoff-button",onClick:Pn(Q.s.EMBED)})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 pt-2 pb-4 md:mt-auto md:py-0",children:[(0,n.jsx)(S.s,{}),(0,n.jsx)(N.n,{icon:"grid",title:"Transparency grid",onClick:an,iconColorClass:qa?"text-actionPrimary":"text-gray-600",testId:"animation-transparency-grid-button"}),(0,n.jsx)(Ze,{animationBackgroundColor:Ra||"#f8fafc",canUpdate:Fa(),onChange:e=>{Pa(e)},fileId:tt.id,portalRoot:nn.current}),(0,n.jsx)(N.n,{icon:"full-screen",title:"Full screen",onClick:en,iconColorClass:Ya?"text-actionPrimary":"text-gray-600",testId:"animation-full-screen-button"}),(0,n.jsx)(I.L,{}),(0,n.jsx)(re.c,{sideOffset:0,align:"end",arrowOffset:-8,side:"bottom",className:"self-end flex justify-center items-center w-full rounded-lg bg-white shadow-[0px 2px 6px 0px rgba(0, 0, 0, 0.06)]",children:(0,n.jsx)(se.q,{side:"left",align:"end",sideOffset:6,source:"animation sidebar",children:(0,n.jsx)(le.u,{title:"Help & resources",placement:"left",children:(0,n.jsx)(k.h,{id:"helper-menu",name:"help",rounded:!0,"aria-haspopup":"true","aria-expanded":"true",focusBackgroundClass:"none",hoverBackgroundClass:"hover:bg-gray-100",backgroundClass:"!size-8 !rounded-lg"})})})})]})]})]})]})}),(0,n.jsx)("div",{className:"absolute bottom-0 right-0 flex flex-grow overflow-hidden top-16","data-onboarding-watch":"side_panel",children:(0,n.jsxs)(i.u,{show:Na!==Q.s.NONE,className:d()("relative flex flex-col bg-white border-l border-gray-100 w-86",{"pb-24":ua.show}),enter:"transform transition ease-in-out duration-50",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-50",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:[Na!==Q.s.LOTTIE_MOCKUP&&(0,n.jsx)("div",{className:"absolute right-6 top-5",children:(0,n.jsx)(k.h,{onClick:Qa,icon:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(he.J,{name:"cross",customSize:20})})})}),Na===Q.s.COMMENTS&&(0,n.jsx)(Ye,{currentUserId:null===(Ce=ma.user)||void 0===Ce?void 0:Ce.id,discussions:null===(Ee=vn.data)||void 0===Ee||null===(ge=Ee.comments)||void 0===ge?void 0:ge.edges,isFetchingDiscussions:vn.fetching,isInputExpanded:Sn,mentionables:null===(xe=wn.data)||void 0===xe?void 0:xe.commentMentionableUsers,mode:En,parentDiscussion:gn,canFetchMoreComments:hn,onCollapseInput:An,onFetchMoreComments:bn,onExpandInput:kn,onDelete:rn,onEdit:dn,onPost:cn,onReply:un,onReplyClick:Cn,onResolve:fn,onSelectReaction:pn,onUnresolve:mn}),Na===Q.s.FILE_INFO&&nt&&(0,n.jsx)(Ge,{fileMetaData:nt,basicMetadata:it,fileData:Va,canEdit:Fa(),canDownload:Ua(),isEditing:Boolean(Fa()&&yt),fileUrl:$e,tags:wt,fileVersionId:tt.currentVersion.id,pageSource:"animation details page",thumbnailUrl:null==ut||null===(Ae=ut.thumbnails)||void 0===Ae||null===(Se=Ae.png)||void 0===Se||null===(we=Se.medium)||void 0===we?void 0:we.url,animation:tt,workspaceId:tt.project.workspaceId}),Na===Q.s.COLOR_PALETTES&&(0,n.jsx)(ze,{animationUrl:$e,portalRoot:nn.current,workspaceId:tt.project.workspaceId,setColorModifiedLottie:Ma,setOpenColorPaletteModal:mt}),Na===Q.s.LOTTIE_MOCKUP&&(0,n.jsx)(Ve,{canEdit:Fa(),animation:tt,onBackToLottieMockupList:Pn(Q.s.SEGMENT_MOCKUP)}),Na===Q.s.SEGMENT_MOCKUP&&(0,n.jsx)(Be,{animation:tt,showLottieMockup:Pn(Q.s.LOTTIE_MOCKUP),onSegmentsDirtyChange:kt}),Na===Q.s.VERSIONS&&(0,n.jsx)(Fe,{onVersionSelected:()=>{ct(null),vt()},animation:tt}),Na===Q.s.QRCODE&&(0,n.jsx)(Ue,{fileUrl:tt.fileObject.url}),!ya&&Na===Q.s.EMBED&&(0,n.jsx)(Re,{canUpdatePublicAsset:Fa(),fileId:tt.id,currentVersionId:tt.currentVersionId,workspaceId:tt.project.workspaceId}),!ya&&Na===Q.s.DOWNLOAD&&it&&(0,n.jsx)(_e,{animation:tt,basicMetadata:it,fileMetaData:nt,source:"animation"}),ya&&(Na===Q.s.DOWNLOAD&&it||Na===Q.s.EMBED)&&(0,n.jsx)(Pe,{selectedTab:Na,onTabChange:_n,canUpdatePublicAsset:Fa(),fileId:tt.id,currentVersionId:tt.currentVersionId,workspaceId:tt.project.workspaceId,animation:tt,basicMetadata:it,fileMetaData:nt,source:"animation",themeId:Ht,themes:Wt,onThemeChange:Jt}),Na===Q.s.ACCESSIBILITY_ANALYZER&&(0,n.jsx)(De,{animationUrl:$e,isLoading:Vn,optimizedVariants:zn,originalSize:Gn,onClickOptimize:Pn(Q.s.DOWNLOAD)}),Na===Q.s.STATE_MACHINES&&(0,n.jsx)(ke.TV,{})]})}),(0,n.jsx)("div",{ref:nn})]}),pt&&dt&&ut&&(0,n.jsx)(Me,{currentFile:ut,currentFileId:null==tt?void 0:tt.id,projectId:null==tt||null===(Te=tt.project)||void 0===Te?void 0:Te.id,lottieAnimation:f()(dt),closeCallback:()=>{mt(!1)},animationName:null==tt?void 0:tt.name,currentBackgroundColor:(null==tt?void 0:tt.backgroundColor)||"none",show:!0}),At&&(0,n.jsx)(O.Z,{buttonTitle:"Discard changes",body:"You've made changes to segments that you haven't saved yet. If you leave now, they'll be discarded.",cancelTitle:"Stay on page",closeCallback:Dn,isDestructive:!1,onConfirm:Tn,showModal:At,title:"Discard changes to segments?"}),Dt&&(0,n.jsx)(O.Z,{title:"Confirm copy frame to clipboard?",body:"Your browser, Safari, needs confirmation to copy this frame to the clipboard.",buttonTitle:"Confirm",onConfirm:jn,closeCallback:On,isDestructive:!1,showModal:Dt})]}),tt&&fa&&!$a.fetching&&$a.data&&(0,n.jsx)(Le,{animation:tt,handback:$a.data.fileHandback})]}),(0,n.jsx)("div",{ref:Rt,className:"hidden"})]})};He.getLayout=e=>(0,n.jsx)(x.By,{showSidebar:!1,compactSidebar:!0,children:(0,n.jsx)(de.Q,{children:e})});var Je=He},49602:function(e,t,a){a.d(t,{n:function(){return c},s:function(){return d}});var n=a(97458),o=a(61916),i=a(52983);const s={analysis:null,animationData:null,file:null,isLoading:!1,isUploading:!1,url:null,uploadError:null};function l(e,t){switch(t.type){case"SET_ANALYSIS":return{...e,analysis:t.payload};case"SET_ANIMATION_DATA":return{...e,animationData:t.payload};case"SET_FILE":return{...e,file:t.payload};case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_URL":return{...e,url:t.payload};case"RESET_STATE":return s;case"SET_UPLOAD_ERROR":return{...e,uploadError:t.payload};default:return e}}const r=(0,i.createContext)(null);function d(e){let{children:t}=e;const[a,d]=(0,i.useReducer)(l,s),c=(0,i.useCallback)((()=>{d({type:"RESET_STATE"})}),[]),u=(0,i.useCallback)((async e=>{try{d({type:"SET_LOADING",payload:!0}),d({type:"SET_FILE",payload:e});const t=await(0,o.cm)(e);d({type:"SET_ANALYSIS",payload:t});const a=new FileReader;a.onload=e=>{var t;(null===(t=e.target)||void 0===t?void 0:t.result)&&d({type:"SET_ANIMATION_DATA",payload:e.target.result})},a.readAsText(e)}catch(e){console.error("Error processing file:",e),d({type:"SET_ANALYSIS",payload:null})}finally{d({type:"SET_LOADING",payload:!1})}}),[]),f=(0,i.useCallback)((async e=>{if(!a.analysis||a.url!==e)try{d({type:"SET_LOADING",payload:!0}),d({type:"SET_UPLOAD_ERROR",payload:null}),d({type:"SET_URL",payload:e});const t=await fetch(e),a=t.headers.get("content-type"),n=null==a?void 0:a.includes("application/zip");if(!t.ok)throw new Error("Failed to fetch animation");const o=await t.blob(),i=new File([o],n?"animation.lottie":"animation.json",{type:n?"application/zip":"application/json"});await u(i)}catch(e){d({type:"SET_UPLOAD_ERROR",payload:{message:e instanceof Error?e.message:"Unable to load Lottie animation from URL"}})}finally{d({type:"SET_LOADING",payload:!1})}}),[u,a.analysis,a.url]),p=(0,i.useCallback)((e=>d({type:"SET_FILE",payload:e})),[]),m=(0,i.useCallback)((e=>d({type:"SET_LOADING",payload:e})),[]),h=(0,i.useCallback)((e=>d({type:"SET_URL",payload:e})),[]),v=(0,i.useMemo)((()=>({actions:{processFile:u,resetState:c,setFile:p,setIsLoading:m,setUrl:h,handleUrlUpload:f},state:a})),[u,c,p,m,h,f,a]);return(0,n.jsx)(r.Provider,{value:v,children:t})}function c(){const e=(0,i.useContext)(r);if(!e)throw new Error("useAccessibilityAnalyzer must be used within an AccessibilityAnalyzerProvider");return e}},2336:function(e,t,a){a.d(t,{s:function(){return l},w:function(){return r}});var n=a(97458),o=a(84867),i=a(52983);const s=i.createContext({features:[]}),l=e=>{let{children:t,features:a}=e;return(0,n.jsx)(s.Provider,{value:{features:a},children:t})},r=()=>{const{features:e}=i.useContext(s);return e?new o.UZ(e):new o.UZ([])}},63410:function(e,t,a){var n,o;a.d(t,{f:function(){return n},p:function(){return o}}),function(e){e.COLLECTION="COLLECTION",e.FILE="FILE"}(n||(n={})),function(e){e.COMMENT="comment",e.DOWNLOAD_AND_VIEW="downloadAndView",e.EDIT_ACCESS="editAccess",e.NO_ACCESS="noAccess",e.VIEW_ONLY="viewOnly"}(o||(o={}))},98271:function(e,t,a){a.d(t,{w:function(){return s}});var n=a(17558),o=a(36132);const i={"Access denied!":e=>{var t,a,o,i;const s=null!==(i=null==e||null===(t=e.extensions)||void 0===t?void 0:t.code)&&void 0!==i?i:"";var l;const r=null!==(l=null==e||null===(o=e.extensions)||void 0===o||null===(a=o.exception)||void 0===a?void 0:a.stacktrace)&&void 0!==l?l:[];throw console.log("Error code:",s),console.log("Stacktrace:",r),new n.J},"Database query failed":e=>{var t,a,o,i;const s=null!==(i=null==e||null===(t=e.extensions)||void 0===t?void 0:t.code)&&void 0!==i?i:"";var l;const r=null!==(l=null==e||null===(o=e.extensions)||void 0===o||null===(a=o.exception)||void 0===a?void 0:a.stacktrace)&&void 0!==l?l:[];throw console.log("Error code:",s),console.log("Stacktrace:",r),new n.J},"File not found":e=>{var t,a,n,i;const s=null!==(i=null==e||null===(t=e.extensions)||void 0===t?void 0:t.code)&&void 0!==i?i:"";var l;const r=null!==(l=null==e||null===(n=e.extensions)||void 0===n||null===(a=n.exception)||void 0===a?void 0:a.stacktrace)&&void 0!==l?l:[];throw console.log("Error code:",s),console.log("Stacktrace:",r),new o.T},Forbidden:e=>{var t,a,o,i;const s=null!==(i=null==e||null===(t=e.extensions)||void 0===t?void 0:t.code)&&void 0!==i?i:"";var l;const r=null!==(l=null==e||null===(o=e.extensions)||void 0===o||null===(a=o.exception)||void 0===a?void 0:a.stacktrace)&&void 0!==l?l:[];throw console.log("Error code:",s),console.log("Stacktrace:",r),new n.J}};function s(e){e.networkError?console.error("Network error:",e.networkError):e.graphQLErrors&&e.graphQLErrors.length>0?e.graphQLErrors.forEach((e=>{const t=e.message,a=Object.keys(i).find((e=>t.includes(e)));var n;a?null===(n=i[a])||void 0===n||n.call(i,e):console.error("GraphQL error:",e)})):console.error("Unknown error:",e)}}}]);